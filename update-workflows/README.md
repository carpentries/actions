# Update Sandpaper Workflows

This action will update the workflow files from {sandpaper} and is designed to
be triggered periodically or manually. 

## Inputs

### `version`

The version of {sandpaper} to use. Defaults to the latest version.

### `repo`

The CRAN-like repository where the version of {sandpaper} lives. Defaults to
`https://carpentries.r-universe.dev/`

### `clean`

Globbing pattern of files to remove before updating workflows

## Outputs

### `new`

The new version of {sandpaper} the workflows have come from.

### `old`

The previous version of {sandpaper} the workflows were at.

## Example usage

```yaml
on:
  workflow_dispatch:
    inputs:
      name:
        description: 'Who triggered this build?'
        required: true
        default: 'Maintainer (via GitHub)'

jobs:
  update_workflow:
    name: "Update Workflow"
    runs-on: ubuntu-latest
    steps:
      - name: "Checkout Repository"
        uses: actions/checkout@v4

      - name: Update Workflows
        id: update
        uses: carpentries/actions/update-workflows@main

      - name: Create Pull Request
        id: cpr
        if: "${{ steps.update.outputs.new }}"
        uses: peter-evans/create-pull-request@v4
        with:
          token: ${{ secrets.SANDPAPER_WORKFLOW }}
          delete-branch: true
          branch: "update-workflows-version-${{ steps.update.outputs.new }}"
          commit-message: "[actions] update sandpaper workflow to version ${{ steps.update.outputs.new }}"
          title: "Update Workflows to Version ${{ steps.update.outputs.new }}"
          body: |
            - Auto-generated by [create-pull-request][1]
            
            [1]: https://github.com/peter-evans/create-pull-request
          draft: false
```
